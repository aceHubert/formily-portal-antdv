{"version":3,"file":"index.js","sourceRoot":"lib/","sources":["page/index.ts"],"names":[],"mappings":";;;;;;AAAA,sEAAwC;AACxC,qCAA+D;AAC/D,sCAA0C;AAC1C,oCAAuD;AACvD,iDAAuD;AACvD,mDAAoD;AACpD,mCAAwC;AAW3B,QAAA,IAAI,GAAG,IAAA,0BAAe,EAAY;IAC7C,IAAI,EAAE,MAAM;IACZ,KAAK,EAAE;QACL,SAAS,EAAE,EAAE;QACb,cAAc,EAAE,CAAC,MAAM,EAAE,MAAM,CAAC;QAChC,SAAS,EAAE,MAAM;KAClB;IACD,KAAK,YAAC,KAAK,EAAE,EAAS;YAAP,KAAK,WAAA;QAClB,IAAM,GAAG,GAAG,IAAA,aAAO,GAAE,CAAA;QAErB,IAAA,qBAAU,EAAC;YACT,OAAO,KAAK,CAAC,SAAS;gBACpB,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,SAAS,IAAI,EAAE,CAAC,CAAC,MAAM,CAAC,UAAC,IAAI,EAAE,IAAI;oBACnD,IAAI,CAAC,gBAAS,IAAA,0BAAS,EAAC,IAAI,CAAC,CAAE,CAAC,GAAG,KAAK,CAAC,SAAS,CAAC,IAAI,CAAC,CAAA;oBACxD,OAAO,IAAI,CAAA;gBACb,CAAC,EAAE,EAAE,CAAC;gBACR,CAAC,CAAC,EAAE,CAAA;QACR,CAAC,CAAC,CAAA;QAEF,IAAA,kBAAO,EAAC,sBAAa,EAAE;YACrB,cAAc,EAAE,IAAA,uBAAc,EAC5B,KAAK,CAAC,cAAc,IAAI,kCAAiB,CAAC,cAAc,CACzD;YACD,SAAS,EAAE,KAAK,CAAC,SAAS;SAC3B,CAAC,CAAA;QAEF,OAAO;YACG,IAAA,KAAsB,KAAK,UAAV,EAAjB,SAAS,mBAAG,KAAK,KAAA,CAAU;YACnC,IAAM,aAAa,GAAG;gBACpB,OAAO,IAAA,OAAC,EAAC,SAAS,EAAE,EAAE,EAAE,KAAK,CAAC,CAAA;YAChC,CAAC,CAAA;YAED,IAAI,GAAG,aAAH,GAAG,uBAAH,GAAG,CAAE,KAAK,EAAE;gBACd,OAAO,aAAa,EAAE,CAAA;aACvB;iBAAM;gBACL,IAAM,IAAI,GAAG,IAAA,iBAAU,GAAE,CAAA;gBACzB,OAAO,IAAA,OAAC,EAAC,kBAAY,EAAE,EAAE,KAAK,EAAE,EAAE,IAAI,MAAA,EAAE,EAAE,EAAE,aAAa,EAAE,CAAC,CAAA;aAC7D;QACH,CAAC,CAAA;IACH,CAAC;CACF,CAAC,CAAA;AAEF,kBAAe,YAAI,CAAA","sourcesContent":["import kebabCase from 'lodash.kebabcase'\nimport { defineComponent, provide, useCssVars } from 'vue-demi'\nimport { createForm } from '@formily/core'\nimport { FormProvider, h, useForm } from '@formily/vue'\nimport { parseStyleUnit } from '../__builtins__/shared'\nimport { PageConsumerProps } from './consumer-props'\nimport { PageInjectKey } from './useApi'\n\n// Types\nimport type { Component } from 'vue-demi'\n\nexport interface PageProps {\n  component?: string | Component\n  containerWidth?: string | number\n  themeVars?: Record<string, string>\n}\n\nexport const Page = defineComponent<PageProps>({\n  name: 'Page',\n  props: {\n    component: {},\n    containerWidth: [String, Number],\n    themeVars: Object,\n  },\n  setup(props, { slots }) {\n    const top = useForm()\n\n    useCssVars(() => {\n      return props.themeVars\n        ? Object.keys(props.themeVars || {}).reduce((prev, curr) => {\n            prev[`theme-${kebabCase(curr)}`] = props.themeVars[curr]\n            return prev\n          }, {})\n        : {}\n    })\n\n    provide(PageInjectKey, {\n      containerWidth: parseStyleUnit(\n        props.containerWidth || PageConsumerProps.containerWidth\n      ),\n      themeVars: props.themeVars,\n    })\n\n    return () => {\n      const { component = 'div' } = props\n      const renderContent = () => {\n        return h(component, {}, slots)\n      }\n\n      if (top?.value) {\n        return renderContent()\n      } else {\n        const form = createForm()\n        return h(FormProvider, { props: { form } }, renderContent())\n      }\n    }\n  },\n})\n\nexport default Page\n"]}