{"version":3,"file":"index.js","sourceRoot":"lib/","sources":["page/index.ts"],"names":[],"mappings":"AAAA,OAAO,SAAS,MAAM,kBAAkB,CAAA;AACxC,OAAO,EAAE,eAAe,EAAE,OAAO,EAAE,MAAM,UAAU,CAAA;AACnD,OAAO,EAAE,UAAU,EAAE,MAAM,eAAe,CAAA;AAC1C,OAAO,EAAE,YAAY,EAAE,CAAC,EAAE,OAAO,EAAE,MAAM,cAAc,CAAA;AACvD,OAAO,EAAE,WAAW,EAAE,MAAM,yBAAyB,CAAA;AACrD,OAAO,EAAE,cAAc,EAAE,MAAM,wBAAwB,CAAA;AACvD,OAAO,EAAE,UAAU,EAAE,MAAM,4BAA4B,CAAA;AACvD,OAAO,EAAE,iBAAiB,EAAE,MAAM,kBAAkB,CAAA;AACpD,OAAO,EAAE,aAAa,EAAE,MAAM,UAAU,CAAA;AAWxC,MAAM,CAAC,IAAM,IAAI,GAAG,eAAe,CAAY;IAC7C,IAAI,EAAE,MAAM;IACZ,KAAK,EAAE;QACL,SAAS,EAAE,EAAE;QACb,cAAc,EAAE,CAAC,MAAM,EAAE,MAAM,CAAC;QAChC,SAAS,EAAE,MAAM;KAClB;IACD,KAAK,YAAC,KAAK,EAAE,EAAS;YAAP,KAAK,WAAA;QAClB,IAAM,SAAS,GAAG,UAAG,WAAW,UAAO,CAAA;QACvC,IAAM,GAAG,GAAG,OAAO,EAAE,CAAA;QAErB,UAAU,CAAC;YACT,OAAO,KAAK,CAAC,SAAS;gBACpB,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,SAAS,IAAI,EAAE,CAAC,CAAC,MAAM,CAAC,UAAC,IAAI,EAAE,IAAI;oBACnD,IAAI,CAAC,gBAAS,SAAS,CAAC,IAAI,CAAC,CAAE,CAAC,GAAG,KAAK,CAAC,SAAS,CAAC,IAAI,CAAC,CAAA;oBACxD,OAAO,IAAI,CAAA;gBACb,CAAC,EAAE,EAAE,CAAC;gBACR,CAAC,CAAC,EAAE,CAAA;QACR,CAAC,CAAC,CAAA;QAEF,OAAO,CAAC,aAAa,EAAE;YACrB,cAAc,EAAE,cAAc,CAC5B,KAAK,CAAC,cAAc,IAAI,iBAAiB,CAAC,cAAc,CACzD;YACD,SAAS,EAAE,KAAK,CAAC,SAAS;SAC3B,CAAC,CAAA;QAEF,OAAO;YACG,IAAA,KAAsB,KAAK,UAAV,EAAjB,SAAS,mBAAG,KAAK,KAAA,CAAU;YACnC,IAAM,aAAa,GAAG;gBACpB,OAAO,CAAC,CAAC,SAAS,EAAE,EAAE,KAAK,EAAE,SAAS,EAAE,EAAE,KAAK,CAAC,CAAA;YAClD,CAAC,CAAA;YAED,IAAI,GAAG,aAAH,GAAG,uBAAH,GAAG,CAAE,KAAK,EAAE;gBACd,OAAO,aAAa,EAAE,CAAA;aACvB;iBAAM;gBACL,IAAM,IAAI,GAAG,UAAU,EAAE,CAAA;gBACzB,OAAO,CAAC,CACN,YAAY,EACZ,EAAE,KAAK,EAAE,EAAE,IAAI,MAAA,EAAE,EAAE,EACnB,EAAE,OAAO,EAAE,cAAM,OAAA,aAAa,EAAE,EAAf,CAAe,EAAE,CACnC,CAAA;aACF;QACH,CAAC,CAAA;IACH,CAAC;CACF,CAAC,CAAA;AAEF,eAAe,IAAI,CAAA","sourcesContent":["import kebabCase from 'lodash.kebabcase'\nimport { defineComponent, provide } from 'vue-demi'\nimport { createForm } from '@formily/core'\nimport { FormProvider, h, useForm } from '@formily/vue'\nimport { stylePrefix } from '../__builtins__/configs'\nimport { parseStyleUnit } from '../__builtins__/shared'\nimport { useCssVars } from '../__builtins__/sfc-helper'\nimport { PageConsumerProps } from './consumer-props'\nimport { PageInjectKey } from './useApi'\n\n// Types\nimport type { Component } from 'vue-demi'\n\nexport interface PageProps {\n  component?: string | Component\n  containerWidth?: string | number\n  themeVars?: Record<string, string>\n}\n\nexport const Page = defineComponent<PageProps>({\n  name: 'Page',\n  props: {\n    component: {},\n    containerWidth: [String, Number],\n    themeVars: Object,\n  },\n  setup(props, { slots }) {\n    const prefixCls = `${stylePrefix}-page`\n    const top = useForm()\n\n    useCssVars(() => {\n      return props.themeVars\n        ? Object.keys(props.themeVars || {}).reduce((prev, curr) => {\n            prev[`theme-${kebabCase(curr)}`] = props.themeVars[curr]\n            return prev\n          }, {})\n        : {}\n    })\n\n    provide(PageInjectKey, {\n      containerWidth: parseStyleUnit(\n        props.containerWidth || PageConsumerProps.containerWidth\n      ),\n      themeVars: props.themeVars,\n    })\n\n    return () => {\n      const { component = 'div' } = props\n      const renderContent = () => {\n        return h(component, { style: prefixCls }, slots)\n      }\n\n      if (top?.value) {\n        return renderContent()\n      } else {\n        const form = createForm()\n        return h(\n          FormProvider,\n          { props: { form } },\n          { default: () => renderContent() }\n        )\n      }\n    }\n  },\n})\n\nexport default Page\n"]}